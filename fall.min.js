(function(global){function getScriptWithFallback(urls,timeoutMs){const list=urls.slice();function loadScript(url,onSuccess,onFail){let done=false;const script=document.createElement("script");script.src=url;script.async=true;const timer=setTimeout(function(){if(!done){done=true;script.remove();onFail()}},timeoutMs);script.onload=function(){if(!done){done=true;clearTimeout(timer);onSuccess(url)}};script.onerror=function(){if(!done){done=true;clearTimeout(timer);onFail()}};document.head.appendChild(script)}if(typeof jQuery!=="undefined"&&typeof jQuery.Deferred==="function"){return jQuery.Deferred(function(deferred){(function loadNext(){if(list.length===0)return deferred.reject();const url=list.shift();loadScript(url,deferred.resolve,loadNext)})()}).promise()}return new Promise(function(resolve,reject){(function loadNext(){if(list.length===0)return reject();const url=list.shift();loadScript(url,resolve,loadNext)})()})}if(!global.works)global.works={};global.works.getScriptWithFallback=getScriptWithFallback})(typeof window!=="undefined"?window:this);
